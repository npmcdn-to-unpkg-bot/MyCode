
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <!--Script references. -->
    <!--Reference the jQuery library. -->
    <script src="Scripts/jquery-1.10.2.min.js"></script>
    <!--Reference the SignalR library. -->
    <script src="Scripts/jquery.signalR-2.0.2.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src='signalr/hubs'></script>
    <!--Add script to update the page and send messages.-->
    <script type='text/javascript'>
    $(function () {
        // Declare a proxy to reference the hub.
        var chat = $.connection.ViewDataHub;
        //init the client function 
        init(chat);
        $("#btnclick").click(function () {
            //Response the information
            $.connection.hub.start().done(function () {
                chat.server.hello().done(function (res) {
                    alert(res);
                })//end of done function
            })//the end of the $.connection
        })//end of click function
        $("#btntalk").click(function () {
            $.connection.hub.start().done(function () {
                chat.server.sendMessag($("#txttalk").val());
                $("#txttalk").val("");
            })//the end of the $.connection
        });//btntalk end
    })
    //init the client method
    function init(chat) {
        chat.client.talk = function (message) {
            var talk = "<h1>" + message + "</h1>";
            $("#dvtalk").append(talk);
        } //end regist the client function
    } //end of the initfunction
    </script>
</head>
<body>
    <div>
        <table id="tbtoday"></table>
        <input type="text" id="txttalk" width="150" />
        <input type="button" id="btnclick" value="clickme" />
        <input type="button" id="btntalk" value="talkwithme" />
        <div id="dvtalk">
        </div>
    </div>
</body>
</html>
